{
  "schema_name": "HP-CDL",
  "schema_version": "1.0.0",
  "released_at": "2026-02-03T00:00:00Z",

  "groups": {
    "Handshake": {
      "required": true,
      "columns": {
        "match_id":       {"dtype": "string",  "nullable": false},
        "event_id":       {"dtype": "string",  "nullable": false},
        "timestamp":      {"dtype": "float64", "nullable": false},
        "period":         {"dtype": "int64",   "nullable": false},
        "x_norm":         {"dtype": "float64", "nullable": false},
        "y_norm":         {"dtype": "float64", "nullable": false},
        "provider":       {"dtype": "string",  "nullable": false},
        "schema_version": {"dtype": "string",  "nullable": false}
      }
    },

    "Engine": {
      "required": true,
      "columns": {
        "action_type": {"dtype": "enum:action_type", "nullable": false},
        "outcome":     {"dtype": "bool",             "nullable": false},
        "xT_value":    {"dtype": "float64",          "nullable": true},
        "vaep_score":  {"dtype": "float64",          "nullable": true},
        "player_id":   {"dtype": "string",           "nullable": true}
      }
    },

    "Motor": {
      "required": true,
      "columns": {
        "phase_id":     {"dtype": "int64",   "nullable": false},
        "sub_phase":    {"dtype": "string",  "nullable": true},
        "energy_pulse": {"dtype": "float64", "nullable": true},
        "is_moment":    {"dtype": "bool",    "nullable": false}
      }
    },

    "Validator": {
      "required": true,
      "columns": {
        "popper_tag": {"dtype": "enum:epistemic_tag", "nullable": false},
        "audit_flag": {"dtype": "bool",               "nullable": false},
        "video_ref":  {"dtype": "string",             "nullable": true}
      }
    }
  },

  "enums": {
    "action_type": {
      "canonical": [
        "PASS","SHOT","CARRY","RECOVERY","DUEL","INTERCEPTION","CLEARANCE",
        "FOUL","SET_PIECE","CROSS","DRIBBLE","PRESSURE","BLOCK","KEEPER_ACTION"
      ],
      "fallback": "UNKNOWN_ACTION",
      "max_new_values_per_pr": 3
    },

    "epistemic_tag": {
      "canonical": [
        "VALIDATED","LOW_CONFIDENCE","THEORETICAL",
        "STOCHASTIC_VARIANCE","STERILE",
        "WIN_STRUCTURAL","WIN_CONVERSION","WIN_GAMESTATE","WIN_KEEPER",
        "HYPOTHESIS","FACT",
        "UNMAPPED_ENUM"
      ],
      "fallback": "LOW_CONFIDENCE",
      "max_new_values_per_pr": 3
    }
  },

  "constraints": {
    "pitch":  {"x_max": 105.0, "y_max": 68.0, "epsilon": 0.1},
    "time":   {"timestamp_min": 0.0, "timestamp_max": 7200.0},
    "phase":  {"min": 1, "max": 6},
    "moment": {"pulse_z_threshold": 1.5}
  }
}
